{"ast":null,"code":"/* eslint-disable functional/no-let, functional/no-loop-statement, functional/immutable-data, functional/no-expression-statement */\n\nimport { equal } from './equal';\nimport { greaterThan } from './greaterThan';\nimport { greaterThanOrEqual } from './greaterThanOrEqual';\nimport { lessThan } from './lessThan';\n/**\n * Returns a distribute function.\n *\n * @param calculator - The calculator to use.\n *\n * @returns The distribute function.\n */\nexport function distribute(calculator) {\n  return function (value, ratios) {\n    var equalFn = equal(calculator);\n    var greaterThanFn = greaterThan(calculator);\n    var lessThanFn = lessThan(calculator);\n    var greaterThanOrEqualFn = greaterThanOrEqual(calculator);\n    var zero = calculator.zero();\n    var one = calculator.increment(zero);\n    var total = ratios.reduce(function (a, b) {\n      return calculator.add(a, b);\n    }, zero);\n    if (equalFn(total, zero)) {\n      return ratios;\n    }\n    var remainder = value;\n    var shares = ratios.map(function (ratio) {\n      var share = calculator.integerDivide(calculator.multiply(value, ratio), total) || zero;\n      remainder = calculator.subtract(remainder, share);\n      return share;\n    });\n    var isPositive = greaterThanOrEqualFn(value, zero);\n    var compare = isPositive ? greaterThanFn : lessThanFn;\n    var amount = isPositive ? one : calculator.decrement(zero);\n    var i = 0;\n    while (compare(remainder, zero)) {\n      if (!equalFn(ratios[i], zero)) {\n        shares[i] = calculator.add(shares[i], amount);\n        remainder = calculator.subtract(remainder, amount);\n      }\n      i++;\n    }\n    return shares;\n  };\n}","map":{"version":3,"names":["equal","greaterThan","greaterThanOrEqual","lessThan","distribute","calculator","value","ratios","equalFn","greaterThanFn","lessThanFn","greaterThanOrEqualFn","zero","one","increment","total","reduce","a","b","add","remainder","shares","map","ratio","share","integerDivide","multiply","subtract","isPositive","compare","amount","decrement","i"],"sources":["/Users/chris/Desktop/uber/node_modules/@dinero.js/core/dist/esm/utils/distribute.js"],"sourcesContent":["/* eslint-disable functional/no-let, functional/no-loop-statement, functional/immutable-data, functional/no-expression-statement */\n\nimport { equal } from './equal';\nimport { greaterThan } from './greaterThan';\nimport { greaterThanOrEqual } from './greaterThanOrEqual';\nimport { lessThan } from './lessThan';\n/**\n * Returns a distribute function.\n *\n * @param calculator - The calculator to use.\n *\n * @returns The distribute function.\n */\nexport function distribute(calculator) {\n  return function (value, ratios) {\n    var equalFn = equal(calculator);\n    var greaterThanFn = greaterThan(calculator);\n    var lessThanFn = lessThan(calculator);\n    var greaterThanOrEqualFn = greaterThanOrEqual(calculator);\n    var zero = calculator.zero();\n    var one = calculator.increment(zero);\n    var total = ratios.reduce(function (a, b) {\n      return calculator.add(a, b);\n    }, zero);\n    if (equalFn(total, zero)) {\n      return ratios;\n    }\n    var remainder = value;\n    var shares = ratios.map(function (ratio) {\n      var share = calculator.integerDivide(calculator.multiply(value, ratio), total) || zero;\n      remainder = calculator.subtract(remainder, share);\n      return share;\n    });\n    var isPositive = greaterThanOrEqualFn(value, zero);\n    var compare = isPositive ? greaterThanFn : lessThanFn;\n    var amount = isPositive ? one : calculator.decrement(zero);\n    var i = 0;\n    while (compare(remainder, zero)) {\n      if (!equalFn(ratios[i], zero)) {\n        shares[i] = calculator.add(shares[i], amount);\n        remainder = calculator.subtract(remainder, amount);\n      }\n      i++;\n    }\n    return shares;\n  };\n}"],"mappings":"AAAA;;AAEA,SAASA,KAAK,QAAQ,SAAS;AAC/B,SAASC,WAAW,QAAQ,eAAe;AAC3C,SAASC,kBAAkB,QAAQ,sBAAsB;AACzD,SAASC,QAAQ,QAAQ,YAAY;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASC,UAAUA,CAACC,UAAU,EAAE;EACrC,OAAO,UAAUC,KAAK,EAAEC,MAAM,EAAE;IAC9B,IAAIC,OAAO,GAAGR,KAAK,CAACK,UAAU,CAAC;IAC/B,IAAII,aAAa,GAAGR,WAAW,CAACI,UAAU,CAAC;IAC3C,IAAIK,UAAU,GAAGP,QAAQ,CAACE,UAAU,CAAC;IACrC,IAAIM,oBAAoB,GAAGT,kBAAkB,CAACG,UAAU,CAAC;IACzD,IAAIO,IAAI,GAAGP,UAAU,CAACO,IAAI,CAAC,CAAC;IAC5B,IAAIC,GAAG,GAAGR,UAAU,CAACS,SAAS,CAACF,IAAI,CAAC;IACpC,IAAIG,KAAK,GAAGR,MAAM,CAACS,MAAM,CAAC,UAAUC,CAAC,EAAEC,CAAC,EAAE;MACxC,OAAOb,UAAU,CAACc,GAAG,CAACF,CAAC,EAAEC,CAAC,CAAC;IAC7B,CAAC,EAAEN,IAAI,CAAC;IACR,IAAIJ,OAAO,CAACO,KAAK,EAAEH,IAAI,CAAC,EAAE;MACxB,OAAOL,MAAM;IACf;IACA,IAAIa,SAAS,GAAGd,KAAK;IACrB,IAAIe,MAAM,GAAGd,MAAM,CAACe,GAAG,CAAC,UAAUC,KAAK,EAAE;MACvC,IAAIC,KAAK,GAAGnB,UAAU,CAACoB,aAAa,CAACpB,UAAU,CAACqB,QAAQ,CAACpB,KAAK,EAAEiB,KAAK,CAAC,EAAER,KAAK,CAAC,IAAIH,IAAI;MACtFQ,SAAS,GAAGf,UAAU,CAACsB,QAAQ,CAACP,SAAS,EAAEI,KAAK,CAAC;MACjD,OAAOA,KAAK;IACd,CAAC,CAAC;IACF,IAAII,UAAU,GAAGjB,oBAAoB,CAACL,KAAK,EAAEM,IAAI,CAAC;IAClD,IAAIiB,OAAO,GAAGD,UAAU,GAAGnB,aAAa,GAAGC,UAAU;IACrD,IAAIoB,MAAM,GAAGF,UAAU,GAAGf,GAAG,GAAGR,UAAU,CAAC0B,SAAS,CAACnB,IAAI,CAAC;IAC1D,IAAIoB,CAAC,GAAG,CAAC;IACT,OAAOH,OAAO,CAACT,SAAS,EAAER,IAAI,CAAC,EAAE;MAC/B,IAAI,CAACJ,OAAO,CAACD,MAAM,CAACyB,CAAC,CAAC,EAAEpB,IAAI,CAAC,EAAE;QAC7BS,MAAM,CAACW,CAAC,CAAC,GAAG3B,UAAU,CAACc,GAAG,CAACE,MAAM,CAACW,CAAC,CAAC,EAAEF,MAAM,CAAC;QAC7CV,SAAS,GAAGf,UAAU,CAACsB,QAAQ,CAACP,SAAS,EAAEU,MAAM,CAAC;MACpD;MACAE,CAAC,EAAE;IACL;IACA,OAAOX,MAAM;EACf,CAAC;AACH"},"metadata":{},"sourceType":"module","externalDependencies":[]}